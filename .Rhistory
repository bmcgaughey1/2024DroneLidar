# Code to prepare 2024 drone lidar data
#
# converts ground models and DSMs
library(terra)
library(fusionwrapr)
devtools::install_github("bmcgaughey1/fusionwrapr")
library(fusionwrapr)
folder <- "H:/2024_DroneLidar/Aldericious/raster/"
# read tiff models and convert to FUSION .dtm format
m <- rast(paste0(folder, "Aldericious_1ft_DTM.tif"))
# write .dtm format
writeDTM(m, paste0(folder, "Aldericious_1ft_DTM.dtm"),
xyunits = "M",
zunits = "M",
coordsys = 1,
zone = 10,
horizdatum = 2,
vertdatum = 2)
m <- rectify(m)
# write .dtm format
writeDTM(m, paste0(folder, "Aldericious_1ft_DTM.dtm"),
xyunits = "M",
zunits = "M",
coordsys = 1,
zone = 10,
horizdatum = 2,
vertdatum = 2)
convertFile <- function(
inputName,
outputName
)
{
# read file
m <- rast(inputName)
# fix rotation
m <- rectify(m)
# write .dtm format
writeDTM(m, outputName,
xyunits = "M",
zunits = "M",
coordsys = 1,
zone = 10,
horizdatum = 2,
vertdatum = 2)
}
# read tiff models and convert to FUSION .dtm format
convertFile(paste0(folder, "Aldericious_1ft_DTM.tif"), paste0(folder, "Aldericious_1ft_DTM.dtm"))
# read tiff models and convert to FUSION .dtm format
convertFile(paste0(folder, "Aldericious_1ft_DTM.tif"), paste0(folder, "Aldericious_1ft_DTM.dtm"))
convertFile(paste0(folder, "Aldericious_1ft_DSM.tif"), paste0(folder, "Aldericious_1ft_DSM.dtm"))
convertFile(paste0(folder, "Aldericious_3ft_DTM.tif"), paste0(folder, "Aldericious_3ft_DTM.dtm"))
convertFile(paste0(folder, "Aldericious_3ft_DSM.tif"), paste0(folder, "Aldericious_3ft_DSM.dtm"))
folder <- "H:/2024_DroneLidar/Sprawl/raster/"
# read tiff models and convert to FUSION .dtm format
convertFile(paste0(folder, "Sprawl_1ft_DTM.tif"), paste0(folder, "Sprawl_1ft_DTM.dtm"))
convertFile(paste0(folder, "Sprawl_1ft_DSM.tif"), paste0(folder, "Sprawl_1ft_DSM.dtm"))
convertFile(paste0(folder, "Sprawl_3ft_DTM.tif"), paste0(folder, "Sprawl_3ft_DTM.dtm"))
convertFile(paste0(folder, "Sprawl_3ft_DSM.tif"), paste0(folder, "Sprawl_3ft_DSM.dtm"))
projection(m)
crs(m)
